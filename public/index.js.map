{"version":3,"sources":["src/components/Header.js","src/components/Footer.js","src/components/Home.js","src/components/Messages.js","src/components/Tags.js","src/components/Message.js","src/components/MessageUpdate.js","src/components/SignUp.js","src/components/LogIn.js","index.js"],"names":["Header","Footer","Home","Messages","messages","docs","map","message","messageData","data","title","content","id","join","Tags","tags","tag","tagData","tagName","Message","firebase","firestore","collection","doc","get","then","document","querySelector","innerHTML","MessageUpdate","SignUp","LogIn","pageBuild","header","navHome","navMessages","navLogIn","navSignUp","navLogOut","footer","addEventListener","getAppContext","event","target","classList","contains","signUpForm","email","value","password","auth","createUserWithEmailAndPassword","cred","console","log","reset","logInForm","signInWithEmailAndPassword","signOut","getDatabaseCollectionContext","onAuthStateChanged","user","focusOnSingularMessage","messageTitle","parentElement","messageContent","add","setTimeout","messageId","getDatabaseTagContext","delete","getDatabaseItemContext","update","app","messagesRef","messageRef","tagsRef"],"mappings":"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","file":"index.js","sourceRoot":"..","sourcesContent":["export default function Header() {\r\n  return `\r\n           <nav class= 'nav'>\r\n                <h1 class= 'nav-logo'>MyMessagesApp</h1>\r\n                <ul class= 'nav-list'>\r\n                    <li class= 'nav-list__home'>Home</li>\r\n                    <li class= 'nav-list__messages'>Messages</li>\r\n                    <li class= 'nav-list__signup'>Sign Up</li>\r\n                    <li class= 'nav-list__login'>Login</li>\r\n                    <li class= 'nav-list__logout'>Logout</li>\r\n                </ul>\r\n            </nav>\r\n\r\n           \r\n        `;\r\n}\r\n","export default function Footer() {\r\n  return `\r\n            <small>&copy 2019</small>\r\n        `;\r\n}\r\n","export default function Home() {\r\n  return `\r\n        <div class='main-content'>\r\n        <h1 class='main-content__welcome'>Welcome to my message board</h1>\r\n        <h3 class='main-content__text'>Using Firebase</h3>\r\n        <div>\r\n        `;\r\n}\r\n","export default function Messages(messages) {\r\n  return `\r\n      <div>\r\n      <h1>My Messages </h1>\r\n      ${messages.docs\r\n        .map(message => {\r\n          const messageData = message.data();\r\n          return `\r\n              <section class='main-content__messages'>\r\n                  <h3>${messageData.title}</h3>\r\n                  <p>${messageData.content}</p>\r\n                  <input class='delete-message__id' type='hidden' value=\"${message.id}\">\r\n                  <button class='delete-message__submit'>&times</button>\r\n                  <button class='edit-message__submit'>...</button>\r\n              </section>\r\n              `;\r\n        })\r\n        .join('')}\r\n      </div>\r\n      <section class='add-message'>\r\n        <input class='add-message__messageTitle' type='text' name='title' placeholder='message title'>\r\n        <input class='add-message__messageBody type='text' name='content' placeholder='message content'>\r\n        <button class='add-message__submit'>Submit</button>\r\n    </section>\r\n      `;\r\n}\r\n","export default function Tags(tags) {\r\n  return `\r\n        <div>\r\n        <h3>Tags</h3>\r\n        ${tags.docs\r\n          .map(tag => {\r\n            const tagData = tag.data();\r\n            return `\r\n                <span class='main-content__tags'>${tagData.tagName}</span>\r\n                `;\r\n          })\r\n          .join('')}\r\n        </div>\r\n        `;\r\n}\r\n","import Tags from './Tags';\r\n\r\nexport default function Message(message) {\r\n  const messageData = message.data();\r\n\r\n  loadTags();\r\n\r\n  return `\r\n        <h1>MyMessagesApp</h1>\r\n        <h3>You have a message.</h3>\r\n        <section class='main-content__message'>\r\n            <h3>${messageData.title}</h3>\r\n            <p>${messageData.content}</p>\r\n            <div class=\"tags\"></div>\r\n        </section>\r\n            \r\n        <section class='update-message'>\r\n            <input class='update-message__messageTitle' type='text' placeholder='edit title'>\r\n            <input class='update-message__messageBody' type='text' placeholder='edit content'>\r\n            <button class='update-message__submit'>Edit</button>\r\n            <input class='update-message__id' type='hidden' value=\"${message.id}\">\r\n        </section>\r\n\r\n        <section class='add-tag'>\r\n          <input class='add-tag__tagName' type='text' placeholder='add a tag'>\r\n          <button class = 'add-tag__submit'>Add</button>\r\n          <input class='add-tag__messageId' type='hidden' value=\"${message.id}\">\r\n        </section>\r\n    \r\n        `;\r\n\r\n  function loadTags() {\r\n    const db = firebase.firestore();\r\n    db.collection('messages')\r\n      .doc(message.id)\r\n      .collection('tags')\r\n      .get()\r\n      .then(tags => {\r\n        document.querySelector('.tags').innerHTML = Tags(tags);\r\n      });\r\n  }\r\n}\r\n","export default function MessageUpdate() {\r\n  return `\r\n     <h1>MyMessagesApp Update Notice</h1>\r\n      <h2 class='main-content__update'>Message successfully sent</h2>\r\n      `;\r\n}\r\n","export default function SignUp() {\r\n  return `\r\n    <div class='main-content__signup'>\r\n        <h1>Sign up</h1>\r\n        <form class='main-content__signup-form'>\r\n        <input type=\"email\" placeholder=\"email\" id='signup-email' required />\r\n        <input type=\"password\" placeholder=\"password\" id='signup-password' required />\r\n        <button class='signup-submit'>Sign up</button>\r\n        </form>\r\n    </div>\r\n    `;\r\n}\r\n","export default function LogIn() {\r\n  return `\r\n    <div class='main-content__login'>\r\n    <h1>Log in</h1>\r\n    <form class = 'main-content__login-form'>\r\n        <input type=\"email\" placeholder=\"email\" id='login-email' required />\r\n        <input type=\"password\" placeholder=\"password\" id='login-password' required />\r\n      <button class='login-submit'>Login</button>\r\n    </form>\r\n</div>\r\n    `;\r\n}\r\n","import Header from './src/components/Header';\r\nimport Footer from './src/components/Footer';\r\nimport Home from './src/components/Home';\r\nimport Messages from './src/components/Messages';\r\nimport Message from './src/components/Message';\r\nimport MessageUpdate from './src/components/MessageUpdate';\r\nimport Tags from './src/components/Tags';\r\nimport SignUp from './src/components/SignUp';\r\nimport LogIn from './src/components/LogIn';\r\nimport './css/style.css';\r\n\r\npageBuild();\r\n\r\nfunction pageBuild() {\r\n  header();\r\n  navHome();\r\n  navMessages();\r\n  navLogIn();\r\n  navSignUp();\r\n  navLogOut();\r\n  footer();\r\n}\r\n\r\nfunction header() {\r\n  const header = document.querySelector('#header');\r\n  header.innerHTML = Header();\r\n}\r\n\r\nfunction footer() {\r\n  const footer = document.querySelector('#footer');\r\n  footer.innerHTML = Footer();\r\n}\r\n\r\nfunction navHome() {\r\n  const homeButton = document.querySelector('.nav-list__home');\r\n  homeButton.addEventListener('click', function() {\r\n    getAppContext().innerHTML = Home();\r\n  });\r\n}\r\n\r\nfunction navSignUp() {\r\n  const signUpButton = document.querySelector('.nav-list__signup');\r\n  signUpButton.addEventListener('click', function() {\r\n    getAppContext().innerHTML = SignUp();\r\n  });\r\n\r\n  getAppContext().addEventListener('click', function() {\r\n    if (event.target.classList.contains('signup-submit')) {\r\n      const signUpForm = document.querySelector('.main-content__signup-form');\r\n      const email = document.querySelector('#signup-email').value;\r\n      const password = document.querySelector('#signup-password').value;\r\n\r\n      //sign up the user\r\n      //asynchronous ...will take some time to complete and will need a promise\r\n      const auth = firebase.auth();\r\n      auth.createUserWithEmailAndPassword(email, password).then(cred => {\r\n        console.log(cred);\r\n      });\r\n      signUpForm.reset();\r\n    }\r\n  });\r\n}\r\n\r\nfunction navLogIn() {\r\n  const logInButton = document.querySelector('.nav-list__login');\r\n  logInButton.addEventListener('click', function() {\r\n    getAppContext().innerHTML = LogIn();\r\n  });\r\n\r\n  getAppContext().addEventListener('click', function() {\r\n    if (event.target.classList.contains('login-submit')) {\r\n      const logInForm = document.querySelector('.main-content__login-form');\r\n      const email = document.querySelector('#login-email').value;\r\n      const password = document.querySelector('#login-password').value;\r\n\r\n      const auth = firebase.auth();\r\n      auth.signInWithEmailAndPassword(email, password).then(cred => {\r\n        //console.log(cred.user);\r\n      });\r\n      logInForm.reset();\r\n    }\r\n  });\r\n}\r\n\r\nfunction navLogOut() {\r\n  const logOutButton = document.querySelector('.nav-list__logout');\r\n  logOutButton.addEventListener('click', function() {\r\n    const auth = firebase.auth();\r\n    auth.signOut().then(() => {\r\n      //console.log('user signed out');\r\n    });\r\n  });\r\n}\r\n\r\nfunction navMessages() {\r\n  //get request\r\n  const messagesButton = document.querySelector('.nav-list__messages');\r\n  messagesButton.addEventListener('click', function() {\r\n    getDatabaseCollectionContext()\r\n      .get()\r\n      .then(messages => {\r\n        const auth = firebase.auth();\r\n        auth.onAuthStateChanged(user => {\r\n          if (user) {\r\n            getAppContext().innerHTML = Messages(messages);\r\n          } else {\r\n            getAppContext().innerHTML = `<h1>Log in to see the message board</h1>`;\r\n          }\r\n        });\r\n      });\r\n    focusOnSingularMessage();\r\n  });\r\n\r\n  //post request\r\n  getAppContext().addEventListener('click', function() {\r\n    if (event.target.classList.contains('add-message__submit')) {\r\n      const messageTitle = event.target.parentElement.querySelector(\r\n        '.add-message__messageTitle'\r\n      ).value;\r\n      const messageContent = event.target.parentElement.querySelector(\r\n        '.add-message__messageBody'\r\n      ).value;\r\n\r\n      getDatabaseCollectionContext().add({\r\n        title: messageTitle,\r\n        content: messageContent\r\n      });\r\n\r\n      getAppContext().innerHTML = MessageUpdate();\r\n      setTimeout(function() {\r\n        getDatabaseCollectionContext()\r\n          .get()\r\n          .then(messages => {\r\n            getAppContext().innerHTML = Messages(messages);\r\n          });\r\n      }, 3000);\r\n    }\r\n  });\r\n\r\n  getAppContext().addEventListener('click', function() {\r\n    if (event.target.classList.contains('add-tag__submit')) {\r\n      const tagName = event.target.parentElement.querySelector(\r\n        '.add-tag__tagName'\r\n      ).value;\r\n      const messageId = event.target.parentElement.querySelector(\r\n        '.add-tag__messageId'\r\n      ).value;\r\n\r\n      getDatabaseTagContext(messageId).add({\r\n        tagName: tagName\r\n      });\r\n\r\n      getDatabaseTagContext(messageId)\r\n        .get()\r\n        .then(tags => {\r\n          document.querySelector('.tags').innerHTML = Tags(tags);\r\n        });\r\n    }\r\n  });\r\n\r\n  //delete request\r\n  getAppContext().addEventListener('click', function() {\r\n    if (event.target.classList.contains('delete-message__submit')) {\r\n      const messageId = event.target.parentElement.querySelector(\r\n        '.delete-message__id'\r\n      ).value;\r\n      console.log(messageId);\r\n\r\n      getDatabaseCollectionContext()\r\n        .doc(messageId)\r\n        .delete();\r\n      getDatabaseCollectionContext()\r\n        .get()\r\n        .then(messages => {\r\n          getAppContext().innerHTML = Messages(messages);\r\n        });\r\n    }\r\n  });\r\n\r\n  //update request\r\n  getAppContext().addEventListener('click', function() {\r\n    if (event.target.classList.contains('update-message__submit')) {\r\n      const messageId = event.target.parentElement.querySelector(\r\n        '.update-message__id'\r\n      ).value;\r\n      const messageTitle = event.target.parentElement.querySelector(\r\n        '.update-message__messageTitle'\r\n      ).value;\r\n      const messageContent = event.target.parentElement.querySelector(\r\n        '.update-message__messageBody'\r\n      ).value;\r\n\r\n      getDatabaseItemContext(messageId).update({\r\n        title: messageTitle,\r\n        content: messageContent\r\n      });\r\n\r\n      getDatabaseItemContext(messageId)\r\n        .get()\r\n        .then(message => {\r\n          document.querySelector('.main-content__message').innerHTML = Message(\r\n            message\r\n          );\r\n        });\r\n    }\r\n  });\r\n}\r\n\r\n//allows for focus on the single post\r\nfunction focusOnSingularMessage() {\r\n  getAppContext().addEventListener('click', function() {\r\n    if (event.target.classList.contains('edit-message__submit')) {\r\n      const messageId = event.target.parentElement.querySelector(\r\n        '.delete-message__id'\r\n      ).value;\r\n\r\n      getDatabaseItemContext(messageId)\r\n        .get()\r\n        .then(message => {\r\n          getAppContext().innerHTML = Message(message);\r\n        });\r\n    }\r\n  });\r\n}\r\n\r\nfunction getAppContext() {\r\n  const app = document.querySelector('#app');\r\n  return app;\r\n}\r\n\r\nfunction getDatabaseCollectionContext() {\r\n  const db = firebase.firestore();\r\n  const messagesRef = db.collection('messages');\r\n  return messagesRef;\r\n}\r\n\r\nfunction getDatabaseItemContext(id) {\r\n  const db = firebase.firestore();\r\n  const messageRef = db.collection('messages').doc(id);\r\n  return messageRef;\r\n}\r\n\r\nfunction getDatabaseTagContext(messageId) {\r\n  const db = firebase.firestore();\r\n  const tagsRef = db\r\n    .collection('messages')\r\n    .doc(messageId)\r\n    .collection('tags');\r\n  return tagsRef;\r\n}\r\n"]}